# Документация

## Регистрация
POST /register

__Request body__
~~Login: string~~
~~Логин пользователя, должен быть уникальным.~~

~~Email: string~~
~~Адрес электронной почты. На него высылается подтверждение регистрации. Должен быть уникальным.~~

phone: string
Должен быть уникальным. Формат: строго 12 символов +7XXXXXXXXXX, только цифры и знак + в начале строки.

password: string
Пароль пользователя. Должен быть надёжным.

password_retype: string
Подтверждение пароля. Должен совпадать с password.

__Response__
200 Успех
~~UserId: string ~~
~~Идентификатор созданного пользователя~~
phone: string
Номер телефона (идентификатор) созданного пользователя

400 Ошибка в переданных параметрах
ErrorMessage: string
Номер телефона уже существует; неверный формат; пароль ненадежный; пароли не совпадают

500 Ошибка сервера
_____
## Аутентификация
POST /login

__Request body__
~~Login: string~~
~~Обязательно отправляется либо логин, либо email~~
~~Email: string~~
Phone: string
Password: string 

__Response__
200 Успех
~~UserId: string ~~
Access: string
Refresh: string

400 Ошибка в переданных данных
500 Ошибка сервера
_____
## Обновление access токена
POST /token/refresh

__Request body__
Refresh: string

__Response__
200 Успех
Access: string
Refresh: string

401 Не авторизован
refresh токен истек

500 Ошибка севера

____
## Подтверждение регистрации
(На уточнении)
GET /register/confirm?phone={}&confirmation={}
Код подтверждения приходит в смс по номеру телефона

__Response__
200 Успех
404 Параметры запроса неверные
500 Ошибка севера
____
## Восстановление пароля
(возможно будет реализовано позднее)
___
## Получение списка паркингов (для владельца)
GET /api/parks/
___
## Получение конкретного паркинга (для владельца)
GET /api/parks/{id}/ 
___
## Получение списка парковок (для пользователя)
GET /api/parkings/ (записи о парковках сортируются по entry_time от самой новой до самой старой)
___
## Добавление новой записи о заезде на паркинг
(сейчас может выполнить любой пользователь прошедший аутентификацию)
POST /api/parkings/create

__Request body__
park_id: int
car_number: string 

__Response__
201 Created
400 Ошибка в переданных данных
___
## Создание новой парковки
(сейчас может выполнить любой пользователь прошедший аутентификацию)
(хозяином парковки устанавливается пользователь выполнивший запрос)
POST /api/parks/create

__Request body__
description: string 
place_count: int
latitude: decimal (с точностью 6 знаков после запятой)
longitude: decimal (с точностью 6 знаков после запятой)

опционально 
address: string
web_address: string

__Response__
201 Created
400 Ошибка в переданных данных
____
__Пагинация__
На ендпоинтах отдающих коллекции подключена пагинация в стиле limit-offset

Пример:

Запрос /api/parkings/?limit=2&offset=3 отдаст 2 записи о парковках пользователя со смещением в 3 элемента от начала коллекции (т. е. запрос отдаст 4, 5 записи). Для получения последней записи достаточно установить параметру limit значение 1 (параметр offset можно опустить)

При использовании пагинации ответ выглядит следующим образом:
![изображение](https://user-images.githubusercontent.com/82332119/206853922-30647849-3243-442e-906b-73ca18450fd0.png)
